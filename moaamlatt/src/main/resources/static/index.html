<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
<meta charset="UTF-8">
<title>mo3amlatkom AshaL!</title>
 <link rel="icon" type="image/x-icon" href="images/icons8-profiles-48 (1).png">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
	integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
	crossorigin="anonymous">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script>

var loggedin = localStorage.getItem("loggin");
if (loggedin === null) {
	   window.location.replace("login.html");
	   alert("please sign in to enter the web site");
}


</script>
<style>

#pp{
position:fixed;
bottom:2px;
right:3px;
}
.btn {
  background-color: DodgerBlue; /* Blue background */
  border: none; /* Remove borders */
  color: white; /* White text */
  padding: 12px 16px; /* Some padding */
  font-size: 16px; /* Set a font size */
  cursor: pointer; /* Mouse pointer on hover */
  font-size: 40px;
  font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
  
}
#del{
position:absolute;
top:340px;
left:60px;
width: 1240px;
}
#idDelIn{
position:absolute;
top:570px;
left:70px;
height:45px;
font-size:24px;
border:2px solid DodgerBlue;
color:RoyalBlue;
}
.addinputs{
position:absolute;
height:45px;
font-size:24px;
border:2px solid DodgerBlue;
color:RoyalBlue;
top:200px;
left:200px;
text-align: right;
}
#details{
	position: absolute;
	top:120px;
	left:900px;
	width:400px;
	height: 200px;
	resize: none;
}


/* Darker background on mouse-over */
.btn:hover {
  background-color: RoyalBlue;
}
#s{
color:gray;
font-size:14px;
position:absolute;
right:10px;
top:15px;
}

#f{
position:absolute;
left:30px;
top:1px;
}
#add{
position:absolute;
width:400px;
height: 200px;
left:480px;
top:120px;
}
#personName{
	top:60px;
left:60px;
}
#dateM{
	top:60px;
left:380px;
}
#place{
	top:60px;
left:690px;	
}
#mowakeaaName{
	top:60px;
left:1000px;
}
#update{
position:absolute;
width:400px;
height: 200px;
top:120px;
left:60px;
}
#img{
position:absolute;
left:7px;
top:10px;
}

.img{
position:absolute;
left:50px;
top:1px;
}
#loGOut{
position:absolute;
top:12px;
left:350px;
}
#SN{
	position: absolute;
	top:432px;
	left:1000px;
}
#SBN{
	position: absolute;
	top:432px;
	left:935px;	
	height: 45px;
	font-size: 24px;
	width:50px;
}
#SD{
	position: absolute;
	top:488px;
	left:1000px;
}
#SBD{
	position: absolute;
	top:488px;
	left:935px;	
	height: 45px;
	font-size: 24px;
	width:50px;
}
#SBP{
	position: absolute;
	top:432px;
	left:60px;
	width:50px;
	height: 45px;
	font-size: 24px;

}
#SP{
	position: absolute;
	top:432px;
	left:125px;	
}
#SBM{
	position: absolute;
	top:488px;
	left:60px;
	width:50px;
	height: 45px;
	font-size: 24px;
}
#SM{
	position: absolute;
	top:488px;
	left:125px;
}
#asmona{
	position: absolute;
	top:450px;
	left:450px;
	font-size: 42px;
	font-style: italic;
	text-shadow: 2px 2px;
	opacity: 0.5;
	color: darkblue;
	}
#upddate{
background-color:rgb(248, 115, 111);
color:white;
}
#sirchBy{
color:white;
position:absolute;
top:15px;
left:45%;
}
#sia{
position: absolute;
	top:15px;
	left:40%;
color:white;
}

</style>
</head>
<body>
	<!-- create navigation bar ( header) -->
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed"
					data-toggle="collapse" data-target="#navbar" aria-expanded="false"
					aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<img src="images/documents.png" id="img">
	
				<img src="images/icons8-profiles-48 (1).png" class="img"/>
				<a class="navbar-brand" href="#" th:href="@{/}">mo3amlatkom AshaaL !</a>
			</div>
			<div id="navbar" class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
<li id="s"> <span id="emaail"  sec:authentication="principal.username"><div  ></div></span></li>				</ul>
				                         <li>   <button id="loGOut" style="border: 5px solid DodgerBlue ;" onclick="go();">Log Out</button></li>
				<li id="s"> <span id="emaail"  sec:authentication="principal.username"><div  ></div></span></li>	
			</div>
		</div>
		<button onclick="window.location.href='aboutUs.html';" style="border: 5px solid DodgerBlue ;padding:2px;background-color:white;text-decoration:none;color:black;position:absolute;top:11px;left:450px;" >about us</button>
		
	<div id="sia">
	Search by:
	</div>
		
		<form id="sirchBy">
		 <input type="radio" name="choice" id="rNumber" value="number" onclick="check(this.value)"> number
        <input type="radio" name="choice" id="rName" value="name" onclick="check(this.value)"> name
         <input type="radio" name="choice" id="rPlace" value="place" onclick="check(this.value)"> place
        <input type="radio" name="choice" id="rDate" value="date" onclick="check(this.value)"> date
        <input type="text" style="color:black;" id="answer" />
        <input type="button" id="btnSearch" onclick="Splace(document.getElementById('answer').value);" value="Search" style="background-color:white;color:DodgerBlue;">
	</form>
		
	</nav>
	<div id="sec">
	 <table class="table" style="position:absolute;top:70px;" id="table">
        <thead>
        	<tr>
        	<th>id</th>
        	<th>number</th> 
        	<th>place</th>
        	<th>date</th>
        	<th>name</th>
        	<th>details</th>
        	</tr>
        	
        	</thead>
        	
        </table>
	</div>
	
	<a href="addMoaamleh.html" style="position:absolute;top:50px;left:50px;">go to add moaamleh</a>
	
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script type="text/javascript">
    function searchbynumber (number){
    	var table = $(".table")
    	
    }
</script>
     <script>
     function check(browser) {
    	  document.getElementById("answer").placeholder=`Search by ${browser}`;
    	}
    </script>
	<script>
	 var loggedin = localStorage.getItem("loggin");
     if (loggedin === null) {
       
     } else {
     	
     	
     	document.getElementById("emaail").innerHTML=localStorage.getItem("email");

     }
        


function go(){
    window.localStorage.clear();
    window.localStorage.setItem('myMn', null);
    window.location.replace('login.html');
 }
    
	</script>
	
	<script type="text/javascript">
	$(document).ready(function(){
		
	$.ajax(
			{
				type:"get",
				url : "admin/getAll",
				
				ContentType:"application/json ;charset=UTF-8",
				
				crossOrigin:true,
				dataType:"json",
				headers: {
					'Accept': 'application/json',
					'Content-Type': 'application/json'
					},
					
				
				success:function(result)
				{
					console.log(result)
					var table = $(".table")
					
					
					for(i=0;i<result.length;i++)
						{
						var x = localStorage.getItem("email");
						console.log(x);
						if(result[i]["email_user"]==x){
							var x1= result[i]["id"];
							var x2= result[i]["number"];
							var x3= result[i]["place"];
							var x4= result[i]["date"];
							var x5= result[i]["name"];
							var x6= result[i]["details"];
							var queryString = "?id=" + x1 + "&number=" + x2 + "&place=" +x3 + "&date=" +x4 + "&name=" + x5 + "&details=" +x6;
							table.append('<tr><td>'+ result[i]["id"] + '</td>' +
									'<td class="number">'+result[i]["number"] + '</td>'+
									'<td>'+ result[i]["place"] + '</td>'+
									'<td>'+ result[i]["date"] + '</td>'+
									'<td>'+ result[i]["name"] + '</td>'+
									'<td>'+ result[i]["details"] + '</td>'+
									'<td><button class="btn btn-danger" id="remove" onclick="removeUser('+result[i]["id"]+')">حذف</button></td>'+
									'<td><a href="update.html?id='+""+x1+""+'&number='+""+x2+""+'&place='+""+x3+""+'&date='+""+x4+""+'&name='+""+x5+""+'&details='+""+x6+""+'"><button id="upddate"type="button" class="btn btn-warning" onclick="">تعديل</button></a></td>'+
									'</tr>'
						
						
							);
							
							$('message').html(table);
						}
						}
					
				},error:function(jqXHR,testStatus,errorThrown)
				{
					alert("error");
				}
			});
	});
	
</script>
<script>

</script>
<script>
function removeUser(id){
         
         $.ajax({
                url: "admin/deleteUser/id?id="+id,
                method:'GET',
                dataType:'json',
                success:function(data){
                    alert("the moaamleh  number "+id+" is  deleted");
                    location.reload();
                
            },error: function(jqXHR,testStatus,errorThrown){
            	alert("faild !!!");
            }
         });
}

function updateUser(id){
    
    $.ajax({
           url: "admin/updateUser/id?id="+id,
           method:'GET',
           dataType:'json',
           success:function(data){
               alert("the user  number "+id+" is  updated");
               location.reload();
           
       },error: function(jqXHR,testStatus,errorThrown){
       	alert("faild !!!");
       }
    });
}

function Splace(place){
	 if( $('#rPlace').is(':checked')){
	$.ajax(
			{
				 type: "POST",
	                url: "/admin/Splace/place?place="+place,
					
	                ContentType: "application/json ;charset=UTF-8",

	                crossOrigin: true,
	                dataType: "json",
	                headers: {
	                    'Accept': 'application/json',
	                    'Content-Type': 'application/json'
	                },
	                

					
				
				success:function(result)
				{
					var table = $(".table")
					
					$('#table').empty();

					for(i=0;i<result.length;i++)
						{
						var x = localStorage.getItem("email");
						
						if(result[i]["email_user"]==x){
							var x1= result[i]["id"];
							var x2= result[i]["number"];
							var x3= result[i]["place"];
							var x4= result[i]["date"];
							var x5= result[i]["name"];
							var x6= result[i]["details"];
							table.append('<tr><td>'+ result[i]["id"] + '</td>' +
									'<td class="number">'+result[i]["number"] + '</td>'+
									'<td>'+ result[i]["place"] + '</td>'+
									'<td>'+ result[i]["date"] + '</td>'+
									'<td>'+ result[i]["name"] + '</td>'+
									'<td>'+ result[i]["details"] + '</td>'+
									'<td><button class="btn btn-danger" id="remove" onclick="removeUser('+result[i]["id"]+')">حذف</button></td>'+
									'<td><a href="update.html?id='+""+x1+""+'&number='+""+x2+""+'&place='+""+x3+""+'&date='+""+x4+""+'&name='+""+x5+""+'&details='+""+x6+""+'"><button id="upddate"type="button" class="btn btn-warning" onclick="">تعديل</button></a></td>'+
									'</tr>'
						
						
							);
							
							$('message').html(table);
						}
						}
					
				},error:function(jqXHR,testStatus,errorThrown)
				{
					alert("error");
				}
			});
}
	 else if( $('#rNumber').is(':checked')){
		 $.ajax(
					{
						 type: "POST",
			                url: "/admin/Snumber/number?number="+place,
							
			                ContentType: "application/json ;charset=UTF-8",

			                crossOrigin: true,
			                dataType: "json",
			                headers: {
			                    'Accept': 'application/json',
			                    'Content-Type': 'application/json'
			                },
			                

							
						
						success:function(result)
						{
							var table = $(".table")
							
							$('#table').empty();

							for(i=0;i<result.length;i++)
								{
								var x = localStorage.getItem("email");
								
								if(result[i]["email_user"]==x){
									var x1= result[i]["id"];
									var x2= result[i]["number"];
									var x3= result[i]["place"];
									var x4= result[i]["date"];
									var x5= result[i]["name"];
									var x6= result[i]["details"];
									table.append('<tr><td>'+ result[i]["id"] + '</td>' +
											'<td class="number">'+result[i]["number"] + '</td>'+
											'<td>'+ result[i]["place"] + '</td>'+
											'<td>'+ result[i]["date"] + '</td>'+
											'<td>'+ result[i]["name"] + '</td>'+
											'<td>'+ result[i]["details"] + '</td>'+
											'<td><button class="btn btn-danger" id="remove" onclick="removeUser('+result[i]["id"]+')">حذف</button></td>'+
											'<td><a href="update.html?id='+""+x1+""+'&number='+""+x2+""+'&place='+""+x3+""+'&date='+""+x4+""+'&name='+""+x5+""+'&details='+""+x6+""+'"><button id="upddate"type="button" class="btn btn-warning" onclick="">تعديل</button></a></td>'+
											'</tr>'
								
								
									);
									
									$('message').html(table);
								}
								}
							
						},error:function(jqXHR,testStatus,errorThrown)
						{
							alert("error");
						}
					});
	 }
	 else if( $('#rName').is(':checked')){
		 $.ajax(
					{
						 type: "POST",
			                url: "/admin/Sname/name?name="+place,
							
			                ContentType: "application/json ;charset=UTF-8",

			                crossOrigin: true,
			                dataType: "json",
			                headers: {
			                    'Accept': 'application/json',
			                    'Content-Type': 'application/json'
			                },
			                

							
						
						success:function(result)
						{
							var table = $(".table")
							
							$('#table').empty();

							for(i=0;i<result.length;i++)
								{
								var x = localStorage.getItem("email");
								
								if(result[i]["email_user"]==x){
									var x1= result[i]["id"];
									var x2= result[i]["number"];
									var x3= result[i]["place"];
									var x4= result[i]["date"];
									var x5= result[i]["name"];
									var x6= result[i]["details"];
									table.append('<tr><td>'+ result[i]["id"] + '</td>' +
											'<td class="number">'+result[i]["number"] + '</td>'+
											'<td>'+ result[i]["place"] + '</td>'+
											'<td>'+ result[i]["date"] + '</td>'+
											'<td>'+ result[i]["name"] + '</td>'+
											'<td>'+ result[i]["details"] + '</td>'+
											'<td><button class="btn btn-danger" id="remove" onclick="removeUser('+result[i]["id"]+')">حذف</button></td>'+
											'<td><a href="update.html?id='+""+x1+""+'&number='+""+x2+""+'&place='+""+x3+""+'&date='+""+x4+""+'&name='+""+x5+""+'&details='+""+x6+""+'"><button id="upddate"type="button" class="btn btn-warning" onclick="">تعديل</button></a></td>'+
											'</tr>'
								
								
									);
									
									$('message').html(table);
								}
								}
							
						},error:function(jqXHR,testStatus,errorThrown)
						{
							alert("error");
						}
					});
	 }
	 else if( $('#rDate').is(':checked')){
		 $.ajax(
					{
						 type: "POST",
			                url: "/admin/Sdate/date?date="+place,
							
			                ContentType: "application/json ;charset=UTF-8",

			                crossOrigin: true,
			                dataType: "json",
			                headers: {
			                    'Accept': 'application/json',
			                    'Content-Type': 'application/json'
			                },
			                

							
						
						success:function(result)
						{
							var table = $(".table")
							
							$('#table').empty();

							for(i=0;i<result.length;i++)
								{
								var x = localStorage.getItem("email");
								
								if(result[i]["email_user"]==x){
									var x1= result[i]["id"];
									var x2= result[i]["number"];
									var x3= result[i]["place"];
									var x4= result[i]["date"];
									var x5= result[i]["name"];
									var x6= result[i]["details"];
									table.append('<tr><td>'+ result[i]["id"] + '</td>' +
											'<td class="number">'+result[i]["number"] + '</td>'+
											'<td>'+ result[i]["place"] + '</td>'+
											'<td>'+ result[i]["date"] + '</td>'+
											'<td>'+ result[i]["name"] + '</td>'+
											'<td>'+ result[i]["details"] + '</td>'+
											'<td><button class="btn btn-danger" id="remove" onclick="removeUser('+result[i]["id"]+')">حذف</button></td>'+
											'<td><a href="update.html?id='+""+x1+""+'&number='+""+x2+""+'&place='+""+x3+""+'&date='+""+x4+""+'&name='+""+x5+""+'&details='+""+x6+""+'"><button id="upddate"type="button" class="btn btn-warning" onclick="">تعديل</button></a></td>'+
											'</tr>'
								
								
									);
									
									$('message').html(table);
								}
								}
							
						},error:function(jqXHR,testStatus,errorThrown)
						{
							alert("error");
						}
					});
	 }
}

</script>
		</body>
</html>
